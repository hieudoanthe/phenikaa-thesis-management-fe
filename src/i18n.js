import i18n from "i18next";
import { initReactI18next } from "react-i18next";

const resources = {
  vi: {
    translation: {
      sidebar: {
        home: "Trang chủ",
        topicRegistration: "Đăng ký đề tài",
        myThesis: "Đề tài của tôi",
        submissions: "Tài liệu của tôi",
        chat: "Nhắn tin",
        notifications: "Thông báo",
        settings: "Cài đặt",
        expand: "Mở rộng sidebar",
        collapse: "Thu gọn sidebar",
      },
      page: {
        home: {
          title: "Trang chủ",
          subtitle: "Chào mừng bạn đến với hệ thống quản lý đồ án tốt nghiệp",
        },
        topicRegistration: {
          title: "Đăng ký đề tài",
          subtitle: "Đăng ký đề tài đồ án tốt nghiệp",
        },
        topics: {
          loading: "Đang tải danh sách đề tài...",
          selectPeriod: "Chọn đợt đăng ký",
          selectPeriodPlaceholder: "Chọn đợt đăng ký",
          currentPeriod: "Đợt đăng ký hiện tại",
          timeRange: "Thời gian:",
          ongoing: "Đang diễn ra",
          ended: "Đã kết thúc",
          noActivePeriodTitle: "Không có đợt đăng ký nào đang diễn ra",
          noActivePeriodMessage:
            "Vui lòng chờ đến đợt đăng ký tiếp theo để có thể đăng ký đề tài.",
          createProposal: "Đề xuất đề tài mới",
          searchLabel: "Tìm kiếm",
          searchPlaceholder: "Tìm theo từ khóa hoặc giảng viên",
          clearFilters: "Xóa bộ lọc",
          supervisor: "Giảng viên:",
          updating: "Đang cập nhật",
          registering: "Đang đăng ký...",
          approved: "Đã duyệt",
          pending: "Đang chờ",
          full: "Hết chỗ",
          register: "Đăng ký",
          pagination: {
            prev: "Trước",
            next: "Tiếp",
            pageInfo: "Trang {{x}}/{{y}} — {{count}} đề tài hiển thị",
          },
        },
        myThesis: {
          title: "Đề tài của tôi",
          subtitle: "Theo dõi tiến độ và trạng thái đề tài đồ án tốt nghiệp",
        },
        submissions: {
          title: "Tài liệu của tôi",
          subtitle: "Xem và quản lý tài liệu",
        },
        chat: { title: "Tin nhắn", subtitle: "Trao đổi với giảng viên" },
        notifications: {
          title: "Thông báo",
          subtitle: "Quản lý thông báo",
        },
        settings: { title: "Cài đặt", subtitle: "Tuỳ chỉnh trải nghiệm" },
        profile: { title: "Hồ sơ cá nhân", subtitle: "Thông tin tài khoản" },
        schedule: {
          title: "Lịch",
          subtitle:
            "Xem lịch trình bảo vệ đồ án tốt nghiệp và các nhiệm vụ liên quan",
        },
        feedback: {
          title: "Phản Hồi",
          subtitle:
            "Xem phản hồi và đánh giá từ giảng viên cho các báo cáo đã nộp",
        },
      },
      // Root-level topics namespace for TopicRegistration page
      topics: {
        loading: "Đang tải danh sách đề tài...",
        selectPeriod: "Chọn đợt đăng ký",
        selectPeriodPlaceholder: "Chọn đợt đăng ký",
        currentPeriod: "Đợt đăng ký hiện tại",
        timeRange: "Thời gian:",
        ongoing: "Đang diễn ra",
        ended: "Đã kết thúc",
        noActivePeriodTitle: "Không có đợt đăng ký nào đang diễn ra",
        noActivePeriodMessage:
          "Vui lòng chờ đến đợt đăng ký tiếp theo để có thể đăng ký đề tài.",
        createProposal: "Đề xuất đề tài mới",
        searchLabel: "Tìm kiếm",
        searchPlaceholder: "Tìm theo từ khóa hoặc giảng viên",
        clearFilters: "Xóa bộ lọc",
        supervisor: "Giảng viên:",
        updating: "Đang cập nhật",
        registering: "Đang đăng ký...",
        approved: "Đã duyệt",
        pending: "Đang chờ",
        full: "Hết chỗ",
        register: "Đăng ký",
        pagination: {
          prev: "Trước",
          next: "Tiếp",
          pageInfo: "Trang {{x}}/{{y}} — {{count}} đề tài hiển thị",
        },
      },
      settingsPage: {
        title: "Cài đặt",
        notifications: {
          title: "Thông báo",
          enableToasts: "Bật thông báo dạng toast",
          importantAlwaysOn: "Luôn hiện thông báo quan trọng",
          sound: "Âm thanh thông báo",
        },
        appearance: {
          title: "Giao diện",
          theme: "Theme",
          fontSize: "Kích thước chữ",
          density: "Mật độ",
          language: "Ngôn ngữ",
          options: {
            theme: { light: "Sáng", dark: "Tối", system: "Theo hệ thống" },
            fontSize: { small: "Nhỏ", normal: "Vừa", large: "Lớn" },
            density: {
              comfortable: "Thoáng",
              standard: "Chuẩn",
              compact: "Nén",
            },
            language: { vi: "Tiếng Việt", en: "English" },
          },
        },
        save: "Lưu cài đặt",
        saved: "Đã lưu ✓",
      },
      home: {
        bannerTitle: "Chào mừng {{name}}!",
        bannerSubtitle: "Tổng quan tiến độ khóa luận tốt nghiệp của bạn",
        progressSection: "Tiến độ thực hiện đề tài",
        overallCompletion: "Hoàn thành tổng thể",
        registeredTopics: "Đề tài đã đăng ký",
        submittedReports: "Báo cáo đã nộp",
        quickActions: "Thao tác nhanh",
        actionSubmitReport: "Nộp báo cáo",
        actionViewFeedback: "Xem phản hồi",
        actionCheckSchedule: "Kiểm tra lịch",
        upcomingDeadlines: "Deadline sắp tới",
        due: "Hạn:",
        priorityHigh: "Cao",
        priorityMedium: "Trung bình",
        priorityLow: "Thấp",
      },
      myThesis: {
        status: {
          PENDING: "Chờ duyệt",
          APPROVED: "Đã duyệt",
          REJECTED: "Từ chối",
          IN_PROGRESS: "Đang thực hiện",
          COMPLETED: "Hoàn thành",
          DEFENDED: "Đã bảo vệ",
          SUGGESTED: "Đã đề xuất",
          UNDER_REVIEW: "Đang xem xét",
          NEEDS_REVISION: "Cần chỉnh sửa",
          UNKNOWN: "Không xác định",
        },
        notUpdated: "Chưa cập nhật",
        invalid: "Không hợp lệ",
      },
      submission: {
        status: {
          submitted: "Đã nộp",
          reviewing: "Đang xem xét",
          approved: "Đã duyệt",
          rejected: "Từ chối",
          unknown: "Không xác định",
        },
        filters: {
          allTypes: "Tất cả loại",
          progress: "Báo cáo tiến độ",
          final: "Báo cáo KLTN",
          other: "Báo cáo khác",
          typeLabel: "Loại báo cáo",
          typePlaceholder: "Chọn loại báo cáo",
          searchLabel: "Tìm kiếm",
          searchPlaceholder: "Tìm kiếm theo tiêu đề...",
        },
        toasts: {
          loadError: "Lỗi khi tải dữ liệu",
          createSuccess: "Tạo báo cáo thành công",
        },
        createNew: "Tạo báo cáo mới",
        loadingList: "Đang tải danh sách báo cáo...",
        emptyList: "Không có báo cáo nào",
        table: {
          title: "Tiêu đề",
          topic: "Đề tài",
          type: "Loại",
          file: "File",
          status: "Trạng thái",
          submittedAt: "Ngày nộp",
          actions: "Hành động",
          view: "Xem",
          download: "Tải về",
          noFile: "Không có file",
          feedback: "Phản hồi",
          edit: "Sửa",
          delete: "Xóa",
          prev: "Trước",
          next: "Sau",
          pageXofY: "Trang {{x}} của {{y}}",
          mobile: { type: "Loại:", submittedAt: "Ngày nộp:" },
          topicPrefix: "Đề tài:",
        },
        modal: {
          create: {
            title: "Tạo báo cáo mới",
            topic: "Chọn đề tài",
            titleLabel: "Tiêu đề báo cáo",
            description: "Mô tả",
            type: "Loại báo cáo",
            attachment: "File đính kèm",
            attachmentHelp:
              "Hỗ trợ: PDF, Word, Excel, PowerPoint, TXT, ZIP, RAR, JPG, PNG, GIF (Tối đa 50MB)",
            chooseFile: "Chọn tệp",
            noFileSelected: "Chưa chọn tệp",
            cancel: "Hủy",
            submit: "Tạo báo cáo",
            submitting: "Đang tạo...",
          },
          edit: {
            title: "Chỉnh sửa báo cáo",
            topic: "Chọn đề tài",
            titleLabel: "Tiêu đề báo cáo",
            description: "Mô tả",
            type: "Loại báo cáo",
            attachmentOptional: "File đính kèm mới (tùy chọn)",
            chooseFile: "Chọn tệp",
            noFileSelected: "Chưa chọn tệp",
            cancel: "Hủy",
            submit: "Cập nhật",
            submitting: "Đang cập nhật...",
          },
          viewFile: {
            title: "Xem file: {{name}}",
            download: "Tải về",
            close: "✕ Đóng",
            cannotShowImage:
              "Không thể hiển thị hình ảnh này. Vui lòng tải về để xem.",
            cannotShowPdf:
              "Không thể hiển thị PDF này. Vui lòng tải về để xem.",
            file: "File: {{name}}",
            fileType: "Loại file: {{type}}",
            notEmbeddable:
              "File này không thể hiển thị trực tiếp. Vui lòng tải về để xem.",
            downloadToView: "Tải về để xem",
          },
          deleteConfirm: {
            title: "Xóa báo cáo",
            message:
              "Bạn có chắc chắn muốn xóa báo cáo này? Hành động này không thể hoàn tác.",
            confirm: "Xóa",
            cancel: "Hủy",
          },
        },
      },
      register: {
        headerTitle: "Đề xuất đề tài khóa luận",
        headerSub: "Vui lòng điền đầy đủ thông tin để đề xuất đề tài của bạn",
        importantNote: "Lưu ý quan trọng",
        noteText:
          "Bạn chỉ được đề xuất 1 đề tài tại một thời điểm. Hãy kiểm tra kỹ thông tin trước khi gửi.",
        periodTime: "Thời gian:",
        periodOngoing: "Đang diễn ra",
        periodEnded: "Đã kết thúc",
        noPeriodTitle: "Không có đợt đăng ký nào đang diễn ra",
        noPeriodText:
          "Vui lòng chờ đến đợt đăng ký tiếp theo để có thể đề xuất đề tài.",
        fields: {
          title: "Tên đề tài",
          description: "Mô tả đề tài",
          objectives: "Mục tiêu",
          methodology: "Phương pháp thực hiện",
          expected: "Kết quả dự kiến",
          reason: "Lý do đề xuất",
          lecturerWanted: "Giảng viên hướng dẫn mong muốn",
        },
        lecturerSelected: "Giảng viên đã chọn",
        lecturerInfo: "Thông tin giảng viên hướng dẫn",
        lecturerNotSelected: "Chưa chọn giảng viên",
        lecturerSearchHint: "Tìm kiếm và chọn giảng viên hướng dẫn",
        lecturerStatus: {
          accepting: "Còn nhận sinh viên",
          full: "Đã đủ",
        },
        fullWarning: "Giảng viên đã đủ sinh viên, không thể gửi đề xuất",
        submit: "Gửi đề xuất",
        submitting: "Đang gửi đề xuất...",
      },
    },
  },
  en: {
    translation: {
      sidebar: {
        home: "Home",
        topicRegistration: "Topic Registration",
        myThesis: "My Thesis",
        submissions: "My Documents",
        chat: "Messages",
        notifications: "Notifications",
        settings: "Settings",
        expand: "Expand sidebar",
        collapse: "Collapse sidebar",
      },
      page: {
        home: {
          title: "Home",
          subtitle: "Welcome to the thesis management system",
        },
        topicRegistration: {
          title: "Topic Registration",
          subtitle: "Register your graduation thesis topic",
        },
        topics: {
          loading: "Loading topics...",
          selectPeriod: "Select registration period",
          selectPeriodPlaceholder: "Select registration period",
          currentPeriod: "Current registration period",
          timeRange: "Time:",
          ongoing: "Ongoing",
          ended: "Ended",
          noActivePeriodTitle: "No registration period is active",
          noActivePeriodMessage:
            "Please wait for the next registration period to register a topic.",
          createProposal: "Create new proposal",
          searchLabel: "Search",
          searchPlaceholder: "Search by keyword or lecturer",
          clearFilters: "Clear filters",
          supervisor: "Supervisor:",
          updating: "Updating",
          registering: "Registering...",
          approved: "Approved",
          pending: "Pending",
          full: "Full",
          register: "Register",
          pagination: {
            prev: "Previous",
            next: "Next",
            pageInfo: "Page {{x}}/{{y}} — {{count}} topics shown",
          },
        },
        myThesis: {
          title: "My Thesis",
          subtitle: "Track progress and status of your thesis",
        },
        submissions: {
          title: "My Documents",
          subtitle: "View and manage your submissions",
        },
        chat: { title: "Messages", subtitle: "Chat with supervisors" },
        notifications: {
          title: "Notifications",
          subtitle: "Manage notifications",
        },
        settings: { title: "Settings", subtitle: "Customize your experience" },
        profile: { title: "Profile", subtitle: "Account information" },
        schedule: {
          title: "Schedule",
          subtitle: "View defense schedule and related assignments",
        },
        feedback: {
          title: "Feedback",
          subtitle: "View feedback and evaluation from lecturers",
        },
      },
      // Root-level topics namespace for TopicRegistration page
      topics: {
        loading: "Loading topics...",
        selectPeriod: "Select registration period",
        selectPeriodPlaceholder: "Select registration period",
        currentPeriod: "Current registration period",
        timeRange: "Time:",
        ongoing: "Ongoing",
        ended: "Ended",
        noActivePeriodTitle: "No registration period is active",
        noActivePeriodMessage:
          "Please wait for the next registration period to register a topic.",
        createProposal: "Create new proposal",
        searchLabel: "Search",
        searchPlaceholder: "Search by keyword or lecturer",
        clearFilters: "Clear filters",
        supervisor: "Supervisor:",
        updating: "Updating",
        registering: "Registering...",
        approved: "Approved",
        pending: "Pending",
        full: "Full",
        register: "Register",
        pagination: {
          prev: "Previous",
          next: "Next",
          pageInfo: "Page {{x}}/{{y}} — {{count}} topics shown",
        },
      },
      settingsPage: {
        title: "Settings",
        notifications: {
          title: "Notifications",
          enableToasts: "Enable toast notifications",
          importantAlwaysOn: "Always show important notifications",
          sound: "Notification sound",
        },
        appearance: {
          title: "Appearance",
          theme: "Theme",
          fontSize: "Font size",
          density: "Density",
          language: "Language",
          options: {
            theme: { light: "Light", dark: "Dark", system: "System" },
            fontSize: { small: "Small", normal: "Normal", large: "Large" },
            density: {
              comfortable: "Comfortable",
              standard: "Standard",
              compact: "Compact",
            },
            language: { vi: "Vietnamese", en: "English" },
          },
        },
        save: "Save settings",
        saved: "Saved ✓",
      },
      home: {
        bannerTitle: "Welcome {{name}}!",
        bannerSubtitle: "Your graduation thesis progress overview",
        progressSection: "Thesis progress",
        overallCompletion: "Overall completion",
        registeredTopics: "Registered topics",
        submittedReports: "Submitted reports",
        quickActions: "Quick actions",
        actionSubmitReport: "Submit report",
        actionViewFeedback: "View feedback",
        actionCheckSchedule: "Check schedule",
        upcomingDeadlines: "Upcoming deadlines",
        due: "Due:",
        priorityHigh: "High",
        priorityMedium: "Medium",
        priorityLow: "Low",
      },
      myThesis: {
        status: {
          PENDING: "Pending",
          APPROVED: "Approved",
          REJECTED: "Rejected",
          IN_PROGRESS: "In progress",
          COMPLETED: "Completed",
          DEFENDED: "Defended",
          SUGGESTED: "Proposed",
          UNDER_REVIEW: "Under review",
          NEEDS_REVISION: "Needs revision",
          UNKNOWN: "Unknown",
        },
        notUpdated: "Not updated",
        invalid: "Invalid",
      },
      submission: {
        status: {
          submitted: "Submitted",
          reviewing: "Under review",
          approved: "Approved",
          rejected: "Rejected",
          unknown: "Unknown",
        },
        filters: {
          allTypes: "All types",
          progress: "Progress report",
          final: "Thesis report",
          other: "Other report",
          typeLabel: "Report type",
          typePlaceholder: "Select report type",
          searchLabel: "Search",
          searchPlaceholder: "Search by title...",
        },
        toasts: {
          loadError: "Failed to load data",
          createSuccess: "Report created successfully",
        },
        createNew: "Create new report",
        loadingList: "Loading reports...",
        emptyList: "No reports",
        table: {
          title: "Title",
          topic: "Topic",
          type: "Type",
          file: "File",
          status: "Status",
          submittedAt: "Submitted at",
          actions: "Actions",
          view: "View",
          download: "Download",
          noFile: "No file",
          feedback: "Feedback",
          edit: "Edit",
          delete: "Delete",
          prev: "Previous",
          next: "Next",
          pageXofY: "Page {{x}} of {{y}}",
          mobile: { type: "Type:", submittedAt: "Submitted:" },
          topicPrefix: "Topic:",
        },
        modal: {
          create: {
            title: "Create new report",
            topic: "Select topic",
            titleLabel: "Report title",
            description: "Description",
            type: "Report type",
            attachment: "Attachment",
            attachmentHelp:
              "Supported: PDF, Word, Excel, PowerPoint, TXT, ZIP, RAR, JPG, PNG, GIF (Max 50MB)",
            chooseFile: "Choose file",
            noFileSelected: "No file selected",
            cancel: "Cancel",
            submit: "Create report",
            submitting: "Creating...",
          },
          edit: {
            title: "Edit report",
            topic: "Select topic",
            titleLabel: "Report title",
            description: "Description",
            type: "Report type",
            attachmentOptional: "New attachment (optional)",
            chooseFile: "Choose file",
            noFileSelected: "No file selected",
            cancel: "Cancel",
            submit: "Update",
            submitting: "Updating...",
          },
          viewFile: {
            title: "View file: {{name}}",
            download: "Download",
            close: "✕ Close",
            cannotShowImage:
              "Cannot display this image. Please download to view.",
            cannotShowPdf: "Cannot display this PDF. Please download to view.",
            file: "File: {{name}}",
            fileType: "File type: {{type}}",
            notEmbeddable:
              "This file cannot be displayed inline. Please download to view.",
            downloadToView: "Download to view",
          },
          deleteConfirm: {
            title: "Delete report",
            message:
              "Are you sure you want to delete this report? This action cannot be undone.",
            confirm: "Delete",
            cancel: "Cancel",
          },
        },
      },
      register: {
        headerTitle: "Propose graduation thesis topic",
        headerSub: "Please fill in all information to submit your proposal",
        importantNote: "Important note",
        noteText:
          "You can submit only one proposal at a time. Please review carefully before sending.",
        periodTime: "Time:",
        periodOngoing: "Ongoing",
        periodEnded: "Ended",
        noPeriodTitle: "No registration period is active",
        noPeriodText:
          "Please wait for the next registration period to submit your proposal.",
        fields: {
          title: "Topic title",
          description: "Topic description",
          objectives: "Objectives",
          methodology: "Methodology",
          expected: "Expected results",
          reason: "Reason",
          lecturerWanted: "Preferred supervisor",
        },
        lecturerSelected: "Selected supervisor",
        lecturerInfo: "Supervisor information",
        lecturerNotSelected: "No supervisor selected",
        lecturerSearchHint: "Search and select a supervisor",
        lecturerStatus: {
          accepting: "Accepting students",
          full: "Full",
        },
        fullWarning: "Supervisor is full, cannot submit proposal",
        submit: "Submit proposal",
        submitting: "Submitting...",
      },
    },
  },
};

const saved = (() => {
  try {
    const raw = localStorage.getItem("student_settings_v1");
    if (!raw) return null;
    return JSON.parse(raw)?.appearance?.language || null;
  } catch (_) {
    return null;
  }
})();

i18n.use(initReactI18next).init({
  resources,
  lng: saved || "vi",
  fallbackLng: "vi",
  interpolation: { escapeValue: false },
});

export default i18n;
